<!DOCTYPE html>
<html lang="es">
<head>
  <!-- Configuración básica del documento -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finalizar Compra | Pavos Deliciosos</title>
  <!-- Inclusión de estilos Bootstrap para diseño responsivo -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../assets/css/finalizarCompra.css">
  <link rel="stylesheet" href="../assets/css/estilo.css">


</head>
<body>
    <!-- Header -->
    <header class="custom-header text-white py-3">
        <div class="container">
            <div class="d-flex justify-content-between align-items-center">
                <!-- Logo -->
                <div class="logo">
                  <a href="../index.html">
                  
                  <img src="../assets/img/logo.png" alt="Pavos Deliciosos" height="50">
                  </a>
                </div>
                
                <!-- Búsqueda -->
                <div class="search-bar mx-3 flex-grow-1">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Buscar pavos...">
                        <button class="btn btn-warning btn-search" type="button">Buscar</button>
                    </div>
                </div>
                
                <!-- Navegación -->
                <nav class="main-nav mx-3">
                    <ul class="nav">
                        <li class="nav-item"><a href="../index.html" class="nav-link text-white">Inicio</a></li>
                        <li class="nav-item"><a href="catalogo.html" class="nav-link text-white">Catálogo</a></li>
                        <li class="nav-item"><a href="acerca.html" class="nav-link text-white">Sobre nosotros</a></li>
                        <li class="nav-item"><a href="admin_productos.html" class="nav-link text-white">Gestión de pavos</a></li>

                    </ul>
                </nav>
                
                <!-- Acciones de usuario -->
                <div class="user-actions d-flex align-items-center">
                <!-- Menú desplegable para gestionar cuenta -->
                    <div class="dropdown mx-2">
                        <button class="btn btn-outline-light dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown">
                            Mi cuenta
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="login.html">Ingresar</a></li>
                            <li><a class="dropdown-item" href="registro.html">Registrarse</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item d-none" href="#" id="logout">Cerrar sesión</a></li>
                        </ul>
                    </div>
                    
                <!-- Botón del carrito de compras -->
                    <button class="btn btn-warning position-relative" id="cart-btn">
                        Mi carrito
                        <span id="cart-badge" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                        0
                        </span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Panel desplegable del carrito -->
    <div class="dropdown-carrito position-absolute end-0 mt-1 me-3 bg-white shadow p-3 rounded" id="cart-dropdown" style="display: none; z-index: 1000; width: 350px;">
        <h3 class="h5">Carro de compras</h3>
        <div id="cart-items" class="mb-2">
            <!-- Items del carrito se añadirán aquí dinámicamente -->
        </div>
        <div class="cart-totals border-top pt-2">
            <p class="mb-1">Transporte: Gratis</p>
            <p class="fw-bold">Total a pagar: <span id="cart-total">$0.00</span></p>
        </div>
        <div class="d-flex justify-content-between mt-3">
            <a href="carrito.html" class="btn btn-primary btn-sm">Ver carrito</a>
            <button class="btn btn-secondary btn-sm" id="close-cart">Cerrar carrito</button>
        </div>
    </div>
    <!-- Contenido principal de la página -->
    <main class="contenedor pagina-checkout">
        <h1>Finalizar compra</h1>
        
        <div class="contenedor-checkout">
        <!-- Formulario para ingresar los datos personales y forma de pago -->
            <div class="formulario-pago">
                <h2>Datos personales</h2>
                <p>La dirección seleccionada se utilizará tanto como su dirección personal (para la factura) como su dirección de entrega.</p>
        <!-- Cada grupo-formulario contiene una etiqueta y su campo correspondiente -->
                <form id="formulario-pago"  >
                    <div class="grupo-formulario">
     <!-- Campos como apellido, dirección, ciudad, país, etc. -->
        <!-- Ciudad y país están predefinidos y no pueden cambiarse -->
                        <label for="nombre">Nombres:</label>
                        <input type="text" id="nombre" name="nombre" required>
                    </div>
                    
                    <div class="grupo-formulario">
                        <label for="apellido">Apellidos:</label>
                        <input type="text" id="apellido" name="apellido" required>
                    </div>
                    
                    <div class="grupo-formulario">
                        <label for="direccion">Dirección:</label>
                        <textarea id="direccion" name="direccion" rows="3" required></textarea>
                    </div>
                    
                    <div class="grupo-formulario">
                        <label for="ciudad">Ciudad:</label>
                        <input type="text" id="ciudad" name="ciudad"value="Guayas" readonly required>
                    </div>
                    
                    <div class="grupo-formulario">
                        <label for="pais">País:</label>
                        <input type="text" id="pais" name="pais" value="Ecuador" readonly>
                    </div>
                    
                    <div class="grupo-formulario">
                        <label for="telefono">Teléfono:</label>
                        <input type="tel" id="telefono" name="telefono" required>
                    </div>
                    
                    <div class="grupo-formulario">
                        <label for="cedula">Cédula:</label>
                        <input type="text" id="cedula" name="cedula" required>
                    </div>
                    
                    <div class="grupo-formulario">
                        <label for="empresa">Empresa (opcional):</label>
                        <input type="text" id="empresa" name="empresa">
                    </div>
                    
                    <div class="grupo-formulario">
                        <label>Método de pago:</label>
                        <div class="metodos-pago">
                            <label>
                                <input type="radio" name="metodo-pago" value="efectivo" checked> Efectivo(acercarse a nuestra sucursal: Dirección: R459+R4H, Victor Manuel Rendón, Guayaquil 090313)
                            </label>
                            <label>
                                <input type="radio" name="metodo-pago" value="transferencia"> Transferencia bancaria (Banco Pichincha)
                            </label>
                        </div>
                    </div>
                    <!-- Muestra la cantidad a pagar total calculado -->
                    <div class="grupo-formulario">
                        <p>Cantidad a pagar: <span id="monto-pagar">$0.00</span></p>
                    </div>
                    <!-- Botón para continuar con la compra -->

                    <button type="submit" class="boton boton-submit">Continuar</button>
                </form>
            </div>
        <!-- Resumen del pedido: productos, subtotal, total -->
            <div class="resumen-pedido">
          <!-- Botón para mostrar los datos bancarios en un modal -->
                <div class="text-end me-5 mb-3" id="btnVerTransferenciaWrapper">
                <button type="button" class="btn btn-outline-info" data-bs-toggle="modal" data-bs-target="#modalTransferencia">
                    Ver datos de transferencia
                </button>
                </div>
                <!-- Botón de vista de factura de ejemplo-->
                <div class="mt-4">
                    <button type="button" class="btn btn-success" id="verFacturaEjemplo">Ver factura de ejemplo</button>

                </div>

                <h2>Resumen de pedido</h2>
                <div class="contenedor-factura">
                    <table id="tablaFactura">
                        <tbody id="datos-cliente">
                            <!-- Datos del cliente se cargarán aquí -->
                        </tbody>
                    </table>
                    
                    <table class="tabla-productos">
                        <thead>
                            <tr>
                                <th>Producto</th>
                                <th>Cantidad</th>
                                <th>Precio unitario</th>
                                <th>Total</th>
                            </tr>
                        </thead>
                        <tbody id="resumen-items">
                            <!-- Productos del carrito se cargarán aquí -->
                        </tbody>
                        <tfoot>
                            <tr>
                                <td colspan="3">Subtotal:</td>
                                <td id="subtotal-pedido">$0.00</td>
                            </tr>
                            <tr>
                                <td colspan="3">Transporte:</td>
                                <td>Gratis</td>
                            </tr>
                            <tr class="total">
                                <td colspan="3">Total a pagar:</td>
                                <td id="total-pedido">$0.00</td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
        </div>
  <!-- Modal para mostrar información bancaria cuando se selecciona la transferencia -->
        <div class="modal fade" id="modalTransferencia" tabindex="-1" aria-labelledby="modalTransferenciaLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="modalTransferenciaLabel">Datos de transferencia bancaria</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
              </div>
          <!-- Campos del formulario de transferencia bancaria -->
            <!-- Algunos campos son readonly para evitar su modificación -->
              <div class="modal-body">
                <form id="formTransferencia">
                  <div class="mb-3">
                    <label for="cuentaOrigen" class="form-label">Cuenta de origen</label>
                    <input type="number" class="form-control" id="cuentaOrigen" placeholder="0123456789..." required  />
                  </div>
                  <div class="mb-3">
                    <label for="cuentaDestino" class="form-label">Cuenta acreditada</label>
                    <input type="text" class="form-control" id="cuentaDestino" value="012456789" readonly />
                  </div>
                  <div class="mb-3">
                    <label for="beneficiario" class="form-label">Nombre del beneficiario</label>
                    <input type="text" class="form-control" id="beneficiario" value="Pavos deliciosos S.A." readonly />
                  </div>
                  <div class="mb-3">
                    <label for="montoTransferencia" class="form-label">Monto a transferir</label>
                    <input type="text" class="form-control" id="montoTransferencia" placeholder="$0,00"readonly />
                  </div>
                  <div class="mb-3">
                    <label for="fechaTransferencia" class="form-label">Fecha de transferencia</label>
                    <input type="date" class="form-control" id="fechaTransferencia" required />
                  </div>
                  <div class="mb-3">
                    <label for="idTransferencia" class="form-label">ID de la transferencia</label>
                    <input type="text" class="form-control" id="idTransferencia" placeholder="TX-MARQ7MJ1-235"  readonly />
                  </div>

                </form>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-primary" id="guardarTransferencia">Aceptar</button>
              </div>
            </div>
          </div>
        </div>
    </main>
<!--Footer-->
    <footer class="custom-footer text-white py-4 mt-5">
        <div class="container text-center">
            <p>&copy; 2025 Proyecto desarrollo de aplicaciones web - Grupo B. Todos los derechos reservados.</p>
            <p class="mb-0">Integrantes: Anastacio, Castillo, Goyes, Solis, Yagual</p>
        </div>
    </footer>
<!--Script-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../assets/js/main.js"></script> 
    <script src="../assets/js/carrito.js"></script>
    <script src="../assets/js/finalizarCompra.js"></script>
    <script src="../assets/js/catalogo.js"></script>

</body>
</html>